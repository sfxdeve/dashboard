import type {
  AuditLog,
  BracketData,
  EntryListItem,
  League,
  LeaderboardRow,
  Match,
  NotificationCampaign,
  PaymentEvent,
  Player,
  ScoringConfig,
  ScoringRun,
  Season,
  Session,
  Tournament,
  UserTournamentTeam,
  WalletPack,
  WalletTransaction,
} from "~/lib/api/types";

export type MockState = {
  schemaVersion: number;
  users: Session["user"][];
  sessions: Session[];
  seasons: Season[];
  tournaments: Tournament[];
  players: Player[];
  entryLists: Record<string, EntryListItem[]>;
  matches: Match[];
  brackets: Record<string, BracketData>;
  scoringConfigs: Record<string, ScoringConfig>;
  scoringRuns: Record<string, ScoringRun[]>;
  teams: UserTournamentTeam[];
  leagues: League[];
  leaderboards: Record<string, LeaderboardRow[]>;
  walletPacks: WalletPack[];
  walletTransactions: WalletTransaction[];
  paymentEvents: PaymentEvent[];
  notificationCampaigns: NotificationCampaign[];
  auditLogs: AuditLog[];
};

const now = "2026-02-24T18:00:00.000Z";

export const MOCK_SCHEMA_VERSION = 1;

export function createSeedState(): MockState {
  return {
    schemaVersion: MOCK_SCHEMA_VERSION,
    users: [
      {
        id: "u_admin",
        email: "admin@fantabeach.io",
        displayName: "Platform Admin",
        role: "super_admin",
        active: true,
      },
      {
        id: "u_ops",
        email: "ops@fantabeach.io",
        displayName: "Tournament Ops",
        role: "ops_admin",
        active: true,
      },
    ],
    sessions: [],
    seasons: [
      {
        id: "s_2026",
        year: 2026,
        name: "Italian Absolute Championship 2026",
        status: "active",
        createdAt: now,
        updatedAt: now,
      },
    ],
    tournaments: [
      {
        id: "t_catania_2026_m",
        seasonId: "s_2026",
        name: "Catania Stage",
        slug: "catania-stage",
        location: "Catania",
        gender: "men",
        isPublic: true,
        status: "open",
        startDate: "2026-06-19",
        endDate: "2026-06-21",
        policy: {
          rosterSize: 10,
          starterCount: 4,
          reserveCount: 3,
          lineupLockAt: "2026-06-18T18:00:00.000Z",
          timezone: "Europe/Rome",
          noRetroactiveScoring: true,
          genderIsolation: true,
        },
        entryListLocked: false,
        lineupLocked: false,
        createdAt: now,
        updatedAt: now,
        registrations: [
          { userId: "u_admin", registeredAt: "2026-06-15T09:00:00.000Z" },
          { userId: "u_ops", registeredAt: "2026-06-16T11:00:00.000Z" },
        ],
      },
      {
        id: "t_catania_2026_w",
        seasonId: "s_2026",
        name: "Catania Stage Women",
        slug: "catania-stage-women",
        location: "Catania",
        gender: "women",
        isPublic: true,
        status: "draft",
        startDate: "2026-06-19",
        endDate: "2026-06-21",
        policy: {
          rosterSize: 10,
          starterCount: 4,
          reserveCount: 3,
          lineupLockAt: "2026-06-18T18:00:00.000Z",
          timezone: "Europe/Rome",
          noRetroactiveScoring: true,
          genderIsolation: true,
        },
        entryListLocked: false,
        lineupLocked: false,
        createdAt: now,
        updatedAt: now,
        registrations: [],
      },
    ],
    players: [
      {
        id: "p1",
        firstName: "Luca",
        lastName: "Rossi",
        gender: "men",
        countryCode: "IT",
        rankPoints: 820,
        status: "active",
      },
      {
        id: "p2",
        firstName: "Marco",
        lastName: "Bianchi",
        gender: "men",
        countryCode: "IT",
        rankPoints: 801,
        status: "active",
      },
      {
        id: "p3",
        firstName: "Giorgio",
        lastName: "Neri",
        gender: "men",
        countryCode: "IT",
        rankPoints: 788,
        status: "active",
      },
      {
        id: "p4",
        firstName: "Fabio",
        lastName: "Villa",
        gender: "men",
        countryCode: "IT",
        rankPoints: 761,
        status: "active",
      },
      {
        id: "p5",
        firstName: "Davide",
        lastName: "Costa",
        gender: "men",
        countryCode: "IT",
        rankPoints: 754,
        status: "active",
      },
      {
        id: "p6",
        firstName: "Mauro",
        lastName: "Gallo",
        gender: "men",
        countryCode: "IT",
        rankPoints: 742,
        status: "active",
      },
      {
        id: "p7",
        firstName: "Simone",
        lastName: "Riva",
        gender: "men",
        countryCode: "IT",
        rankPoints: 732,
        status: "active",
      },
      {
        id: "p8",
        firstName: "Pietro",
        lastName: "Longo",
        gender: "men",
        countryCode: "IT",
        rankPoints: 710,
        status: "active",
      },
      {
        id: "pw1",
        firstName: "Giada",
        lastName: "Verdi",
        gender: "women",
        countryCode: "IT",
        rankPoints: 834,
        status: "active",
      },
      {
        id: "pw2",
        firstName: "Elena",
        lastName: "Bruni",
        gender: "women",
        countryCode: "IT",
        rankPoints: 812,
        status: "active",
      },
    ],
    entryLists: {
      t_catania_2026_m: [
        {
          id: "el_1",
          tournamentId: "t_catania_2026_m",
          pair: {
            id: "pair_1",
            tournamentId: "t_catania_2026_m",
            playerIds: ["p1", "p2"],
            seed: 1,
            status: "pool",
          },
          coach: "Coach A",
          ranking: 1621,
          entryStatus: "pool",
        },
        {
          id: "el_2",
          tournamentId: "t_catania_2026_m",
          pair: {
            id: "pair_2",
            tournamentId: "t_catania_2026_m",
            playerIds: ["p3", "p4"],
            seed: 2,
            status: "pool",
          },
          coach: "Coach B",
          ranking: 1549,
          entryStatus: "pool",
        },
        {
          id: "el_3",
          tournamentId: "t_catania_2026_m",
          pair: {
            id: "pair_3",
            tournamentId: "t_catania_2026_m",
            playerIds: ["p5", "p6"],
            seed: 6,
            status: "qualification",
          },
          ranking: 1496,
          entryStatus: "qualification",
        },
        {
          id: "el_4",
          tournamentId: "t_catania_2026_m",
          pair: {
            id: "pair_4",
            tournamentId: "t_catania_2026_m",
            playerIds: ["p7", "p8"],
            seed: 10,
            status: "reserve",
          },
          ranking: 1442,
          entryStatus: "reserve",
          reserveOrder: 1,
        },
      ],
      t_catania_2026_w: [
        {
          id: "el_w1",
          tournamentId: "t_catania_2026_w",
          pair: {
            id: "pair_w1",
            tournamentId: "t_catania_2026_w",
            playerIds: ["pw1", "pw2"],
            seed: 1,
            status: "pool",
          },
          ranking: 1646,
          entryStatus: "pool",
        },
      ],
    },
    matches: [
      {
        id: "m1",
        tournamentId: "t_catania_2026_m",
        phase: "qualification",
        day: "friday",
        round: 1,
        slot: 1,
        status: "completed",
        bestOf: 3,
        pairAId: "pair_3",
        pairBId: "pair_4",
        setScores: [
          { setNumber: 1, pairAScore: 21, pairBScore: 18 },
          { setNumber: 2, pairAScore: 21, pairBScore: 17 },
        ],
        winnerPairId: "pair_3",
        scheduledAt: "2026-06-19T08:00:00.000Z",
        completedAt: "2026-06-19T09:00:00.000Z",
      },
      {
        id: "m2",
        tournamentId: "t_catania_2026_m",
        phase: "pools",
        day: "friday",
        round: 1,
        slot: 1,
        status: "completed",
        bestOf: 3,
        pairAId: "pair_1",
        pairBId: "pair_3",
        setScores: [
          { setNumber: 1, pairAScore: 20, pairBScore: 22 },
          { setNumber: 2, pairAScore: 21, pairBScore: 18 },
          { setNumber: 3, pairAScore: 13, pairBScore: 15 },
        ],
        winnerPairId: "pair_3",
        scheduledAt: "2026-06-19T13:00:00.000Z",
        completedAt: "2026-06-19T14:00:00.000Z",
      },
      {
        id: "m3",
        tournamentId: "t_catania_2026_m",
        phase: "main_draw",
        day: "saturday",
        round: 1,
        slot: 1,
        status: "scheduled",
        bestOf: 3,
        pairAId: "pair_1",
        pairBId: "pair_2",
        setScores: [],
        scheduledAt: "2026-06-20T12:30:00.000Z",
      },
    ],
    brackets: {},
    scoringConfigs: {
      t_catania_2026_m: {
        tournamentId: "t_catania_2026_m",
        basePointMultiplier: 1,
        bonusWin20: 6,
        bonusWin21: 3,
        updatedAt: now,
      },
      t_catania_2026_w: {
        tournamentId: "t_catania_2026_w",
        basePointMultiplier: 1,
        bonusWin20: 6,
        bonusWin21: 3,
        updatedAt: now,
      },
    },
    scoringRuns: {
      t_catania_2026_m: [],
      t_catania_2026_w: [],
    },
    teams: [
      {
        id: "team_admin_t1",
        userId: "u_admin",
        tournamentId: "t_catania_2026_m",
        rosterPlayerIds: ["p1", "p2", "p3", "p4", "p5", "p6", "p7", "p8"],
        starters: ["p1", "p2", "p3", "p4"],
        reserves: ["p5", "p6", "p7"],
        createdAt: now,
      },
      {
        id: "team_ops_t1",
        userId: "u_ops",
        tournamentId: "t_catania_2026_m",
        rosterPlayerIds: ["p1", "p2", "p3", "p4", "p5", "p6", "p7", "p8"],
        starters: ["p3", "p4", "p5", "p6"],
        reserves: ["p1", "p2", "p8"],
        createdAt: now,
      },
    ],
    leagues: [
      {
        id: "l_overall_2026",
        seasonId: "s_2026",
        name: "Overall Ranking 2026",
        mode: "overall",
        status: "active",
        tieBreakers: ["highest_player_score", "match_dominance"],
        updatedAt: now,
      },
      {
        id: "l_h2h_2026",
        seasonId: "s_2026",
        name: "Head-to-Head 2026",
        mode: "head_to_head",
        status: "active",
        tieBreakers: ["head_to_head_points", "match_dominance"],
        updatedAt: now,
      },
    ],
    leaderboards: {
      l_overall_2026: [
        {
          id: "lb_1",
          leagueId: "l_overall_2026",
          userId: "u_admin",
          displayName: "Platform Admin",
          rank: 1,
          totalPoints: 42,
          tieBreakerScore: 14,
          lastUpdated: now,
        },
        {
          id: "lb_2",
          leagueId: "l_overall_2026",
          userId: "u_ops",
          displayName: "Tournament Ops",
          rank: 2,
          totalPoints: 37,
          tieBreakerScore: 12,
          lastUpdated: now,
        },
      ],
      l_h2h_2026: [],
    },
    walletPacks: [
      {
        id: "pack_starter",
        name: "Starter",
        credits: 100,
        priceCents: 999,
        currency: "EUR",
        active: true,
      },
      {
        id: "pack_medium",
        name: "Medium",
        credits: 250,
        priceCents: 1999,
        currency: "EUR",
        active: true,
      },
      {
        id: "pack_premium",
        name: "Premium",
        credits: 600,
        priceCents: 3999,
        currency: "EUR",
        active: true,
      },
    ],
    walletTransactions: [
      {
        id: "tx_1",
        userId: "u_admin",
        amountCredits: 100,
        direction: "credit",
        reason: "Pack purchase",
        createdAt: now,
      },
      {
        id: "tx_2",
        userId: "u_ops",
        amountCredits: 25,
        direction: "debit",
        reason: "Tournament entry",
        createdAt: now,
      },
    ],
    paymentEvents: [
      {
        id: "pay_1",
        provider: "apple",
        externalId: "app-store-event-01",
        status: "verified",
        receivedAt: now,
        verifiedAt: now,
        payload: { environment: "sandbox" },
      },
      {
        id: "pay_2",
        provider: "google",
        externalId: "google-play-event-18",
        status: "received",
        receivedAt: now,
        payload: { packageName: "io.fantabeach" },
      },
    ],
    notificationCampaigns: [
      {
        id: "camp_1",
        title: "Friday Matches Live",
        body: "Qualification matches are now live.",
        audience: "active_users",
        status: "sent",
        sentAt: now,
        createdAt: now,
      },
    ],
    auditLogs: [
      {
        id: "audit_seed_1",
        actorUserId: "u_admin",
        action: "seed_initialized",
        entityType: "system",
        entityId: "mock_state",
        timestamp: now,
        after: { schemaVersion: MOCK_SCHEMA_VERSION },
      },
    ],
  };
}
